{% extends "base_templates/base.html" %}
{% load crispy_forms_tags %}
{% block title %}Programs{% endblock %}

{% block body %}
<h3>Programs</h3>
<h4><a class="btn btn-success my-2 px-auto" href='{% url "create_program" %}'>Create New Program</a></h4>
<hr />
{% for program in object_list %}
  <div class="row">
  <div class="col-lg-6">
    <h5>{{ program.name }}</h5>
    <p><strong>{{program.start_date}} to {{program.end_date}}</strong></p>
    <br/>
    <h6>Stages</h6>
    <ol>
    {% for stage in program.stages.all %}
      <li>{{ stage.start_date|date:"m/d/Y" }} - {{ stage.end_date|date:"m/d/Y" }}: {{ stage.name }} <a href="{% url "update_program_stage" pk=stage.id %}"><span class="bi-pencil"></span></a></li>
      <ul>{% for step in stage.steps.all %}<li>{{ step.get_step_key_display }}</li>{% endfor %}</ul>
    {% empty %}
      None Created
    {% endfor %}
    </ol>
    <br/>
    <p>Created: {{ program.created_on }} - Updated: {{ program.updated_on }}
    <a href='{% url "update_program" program.id %}'>Update</a> -
    <a href='{% url "update_program" program.id %}'>Clone</a>
    </p>
  </div>
  <div class="col-lg-6">
    <div class="card">
      <div class="card-body">
        <div class="card-title">Admin actions</div>
        <li><a role="button" href="{% url 'program_lottery' pk=program.id %}">Run lottery</a></li>
        <li><a role="button" href="{% url 'courses' pk=program.id %}">Manage Classes</a></li>
      </div>
    </div>
  </div>
  </div>
  <hr />
{% endfor %}
{% endblock %}
